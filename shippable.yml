language: node_js

node_js:
  - "0.11"
  - "0.10"

env:
  - XUNIT_FILE=shippable/testresults/result.xml

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - ./node_modules/.bin/_mocha -R xunit > $XUNIT_FILE

after_script:
  - ./node_modules/.bin/istanbul cover ./node_modules/.bin/_mocha -- -R xunit
  - ./node_modules/.bin/istanbul report cobertura --dir shippable/codecoverage/
